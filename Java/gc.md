# [Java](https://github.com/hyojaekim/TIL/tree/master/Java) / [ğŸ  Home](https://github.com/hyojaekim/TIL)

### Garbage Collection

#### stop-the-world

GCë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¤‘ë‹¨í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. **GCë¥¼ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìŠ¤ë ˆë“œ ëª¨ë‘ ì‘ì—…ì„ ë©ˆì¶˜ë‹¤.** ì–´ë– í•œ GC ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ë”ë¼ë„ stop-the-worldëŠ” ë°œìƒí•˜ë©°, GC íŠœë‹ì„ í•œë‹¤ëŠ” ê²ƒì€ stop-the-world ì‹œê°„ì„ ì¤„ì´ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

#### 2ê°€ì§€ ì˜ì—­

Hostspot VMì—ì„œëŠ” Young ì˜ì—­ê³¼ Old ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰œë‹¤.

**Young ì˜ì—­ì€ ìƒˆë¡œìš´ ê°ì²´ë“¤ì´ ì—¬ê¸°ì— ìœ„ì¹˜í•´ì„œ, ë§ì€ ê°ì²´ë“¤ì´ ê¸ˆë°© ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœê°€ ëœë‹¤.** í•´ë‹¹ ì˜ì—­ì—ì„œ ê°ì²´ê°€ ì‚¬ë¼ì§ˆë•Œ **Minor GCê°€ ë°œìƒí•œë‹¤ê³  í•œë‹¤.**

**Old ì˜ì—­ì€ Young ì˜ì—­ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤ì´ ì´ê³³ìœ¼ë¡œ ë³µì‚¬ëœë‹¤.** í•´ë‹¹ ì˜ì—­ì—ì„œ ê°ì²´ê°€ ì‚¬ë¼ì§ˆ ë•Œ **Major GC ë˜ëŠ” Full GCê°€ ë°œìƒí•œë‹¤ê³  í•œë‹¤.**

#### Old ì˜ì—­ì— ìˆëŠ” ê°ì²´ê°€ Young ì˜ì—­ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°

Old ì˜ì—­ì—ëŠ” 512ë°”ì´íŠ¸ ë©ì–´ë¦¬(chunk)ë¡œ ë˜ì–´ ìˆëŠ” **ì¹´ë“œ í…Œì´ë¸”(card table)ì´ ì¡´ì¬í•œë‹¤.** Old ì˜ì—­ì— ìˆëŠ” ê°ì²´ê°€ Young ì˜ì—­ì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•  ë•Œ, ì •ë³´ê°€ í‘œì‹œëœë‹¤. ë”°ë¼ì„œ Young ì˜ì—­ì˜ GCë¥¼ ì‹¤í–‰í•  ë•Œ, **Old ì˜ì—­ì˜ ëª¨ë“  ê°ì²´ë¥¼ í™•ì¸í•˜ì§€ ì•Šê³ , ì¹´ë“œ í…Œì´ë¸”ì„ í™•ì¸í•œë‹¤.**

#### Young ì˜ì—­

ìƒˆë¡œìš´ ê°ì²´ë“¤ì´ ì €ì¥ë˜ëŠ” Young ì˜ì—­ì€ **Eden ì˜ì—­ 1ê°œì™€ Survivor ì˜ì—­ 2ê°œë¡œ ì´ 3ê°œì˜ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰œë‹¤.**

##### ì²˜ë¦¬ ì ˆì°¨

Young ì˜ì—­ì˜ ì²˜ë¦¬ ì ˆì°¨ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

1. ìƒˆë¡œ ìƒì„±í•œ ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” Eden ì˜ì—­ì— ìœ„ì¹˜í•œë‹¤.
2. Eden ì˜ì—­ì—ì„œ GCê°€ í•œ ë²ˆ ë°œìƒí•œ í›„ ì‚´ì•„ë‚¨ì€ ê°ì²´ëŠ” Survivor ì˜ì—­ ì¤‘ í•˜ë‚˜ë¡œ ì´ë™ëœë‹¤.
3. Eden ì˜ì—­ì—ì„œ GCê°€ ë°œìƒí•˜ë©´ ì´ë¯¸ ì‚´ì•„ë‚¨ì€ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” Survivor ì˜ì—­ìœ¼ë¡œ ê°ì²´ê°€ ê³„ì† ìŒ“ì¸ë‹¤.
4. í•˜ë‚˜ì˜ Survivor ì˜ì—­ì´ ê°€ë“ ì°¨ê²Œ ë˜ë©´ ê·¸ ì¤‘ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ ë‹¤ë¥¸ Survivor ì˜ì—­ìœ¼ë¡œ ì´ë™í•œë‹¤. ê·¸ë¦¬ê³  ê°€ë“ ì°¬ Survivor ì˜ì—­ì€ ì•„ë¬´ ë°ì´í„°ë„ ì—†ëŠ” ìƒíƒœë¡œ ëœë‹¤.
5. ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ë‹¤ê°€ ê³„ì†í•´ì„œ ì‚´ì•„ë‚¨ì•„ ìˆëŠ” ê°ì²´ëŠ” Old ì˜ì—­ìœ¼ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤.

ì´ ì ˆì°¨ë¥¼ í™•ì¸í•´ ë³´ë©´ ì•Œê² ì§€ë§Œ Survivor ì˜ì—­ ì¤‘ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ ë¹„ì–´ ìˆëŠ” ìƒíƒœë¡œ ë‚¨ì•„ ìˆì–´ì•¼ í•œë‹¤. ë§Œì•½ ë‘ Survivor ì˜ì—­ì— ëª¨ë‘ ë°ì´í„°ê°€ ì¡´ì¬í•˜ê±°ë‚˜, ë‘ ì˜ì—­ ëª¨ë‘ ì‚¬ìš©ëŸ‰ì´ 0ì´ë¼ë©´ ì—¬ëŸ¬ë¶„ì˜ ì‹œìŠ¤í…œì€ ì •ìƒì ì¸ ìƒí™©ì´ ì•„ë‹ˆë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

> Eden ì˜ì—­ì— ìµœì´ˆë¡œ ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ê³ , Survivor ì˜ì—­ì„ í†µí•´ì„œ Old ì˜ì—­ìœ¼ë¡œ ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ê°ì²´ê°€ ì´ë™í•œë‹¤ëŠ” ì‚¬ì‹¤ì€ ê¼­ ê¸°ì–µí•˜ì.



#### Old ì˜ì—­

Old ì˜ì—­ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ê°€ ê°€ë“ ì°¨ë©´ GCë¥¼ ì‹¤í–‰í•œë‹¤. Old ì˜ì—­ì˜ GC ë°©ì‹ì€ JDK 7ì„ ê¸°ì¤€ìœ¼ë¡œ 5ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.

Serial GC
Parallel GC
Parallel Old GC(Parallel Compacting GC)
Concurrent Mark & Sweep GC(ì´í•˜ CMS)
G1(Garbage First) GC

[ì°¸ê³ ](https://d2.naver.com/helloworld/1329)


### [ë§¨ ìœ„ë¡œ ì´ë™](https://github.com/hyojaekim/TIL/blob/master/Java/java.md#java---home)
