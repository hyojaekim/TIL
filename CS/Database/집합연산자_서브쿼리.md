# 집합 연산자

## Union 연산

두 개 이상의 SELECT 문들의 결과 집합을 단일 결과 집합으로 결합하며 결합시 중복된 데이터는 제거 된다.
* 두 개의 SELECT 문에서 중복되는 데이터 제거
* ORDER BY로 정렬하고자 한다면, 맨 마지막 SELECT 문에 ORDER BY절을 사용한다.

## UnionAll 연산
두 개 이상의 SELECT 문들의 결과 집합을 단일 결과 집합으로 결합하며 결합시 중복된 데이터도 모두 출력한다.

## Intersect 연산
두 개 이상의 SELECT 문들의 결과 집합을 하나의 결과 집합으로 결합한다.
* 집합 A와 B의 교집합을 리턴한다. (INNER JOIN과 동일)
* ORDER BY절은 마지막에 명시한다.

## Except 연산
맨위에 SELECT문의 결과 집합에서 그 아래에 있는 SELECT문의 결과 집합을 제외한 결과를 리턴한다.
* 집합 A와 B의 차집합을 리턴한다.

# 서브쿼리
SQL문 내에서 메인 쿼리가 아닌 하위에 존재하는 쿼리를 말한다. 이로 인해 다양한 결과를 도출 할 수 있다.

## 스칼라 서브쿼리
SELECT 리스트 안에 존재하는 쿼리를 말한다. 즉, 컬럼 대신에 사용하는 쿼리를 말한다.

## 인라인 뷰
FROM 절에 존재하는 쿼리를 말한다.

## 중첩 서브쿼리
WHERE 절에 존재하는 쿼리를 말한다.

## ANY 연산자
값을 서브 쿼리에 의해 반환된 값 집합과 비교한다. 서브쿼리의 값이 어떠한 값이라도 만족을 하면 조건이 성립된다.
* 서브쿼리에 의해 리턴되는 각각의 값과 조건을 비교하여 하나 이상 만족하면 참이다.
* IN 연산자와 달리 어떤 특정한 값이 아닌 범위로 비교연산을 처리한다.
```SQL
SELECT
    EMPNO
    , ENAME
    , JOB
    , SAL
  FROM
    EMP
WHERE
    SAL > ANY (SELECT SAL FROM EMP WHERE JOB = 'MANAGER')
    AND JOB <> 'MANAGER';
```

## ALL 연산자
값을 서브쿼리에 의해 반환된 값 집합과 비교한다. 해당 연산자는 서브쿼리의 모든 값이 만족해야 조건이 성립된다.

## EXISTS 연산자
서브쿼리 내에 집합이 존재하는지 존재 여부만을 판단한다. 존재 여부만을 판단하므로 연산 시 부하가 줄어든다.
