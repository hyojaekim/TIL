# PostgreSQL
* 최근 각광받고 있는 오픈 소스 DB시스템 (무료)
* 관계형 DB 시스템의 일종
* multi-version concurrency control(MVCC) 완벽한 지원

# MVCC (다중 버전 동시성 제어, MCC)
동시성 제어 방식 중 하나이다. (트랜잭션을 구현하는데 사용하는 주요 기술 중 하나)
데이터 일관성과 적합성을 보장한다.
각각의 트랜잭션이 쿼리를 실행하는 시점으로 스냅샷으로 처리한다.
MVCC 기법으로 최소한의 잠금을 사용하기 때문에 다중 사용자 환경에서도 좋은 성능을 낼 수 있는 것이 특징이다.

## 동시성 제어가 없다면?
DB를 읽는 동시에 다른 누군가가 기록한다면 일관성이 없는 데이터를 보게 될 가능성이 있다.
즉, A가 데이터를 읽고자 하고, 동시에 B가 쓰기 작업을 수행한다면 A는 일관성이 없는 데이터를 보게 될 가능성이 있다.

## MVCC는 어떻게 동작하나?
트랜잭션은 격리 레벨을 따르는데, MVCC로 구현된 가장 흔한 격리 레벨은 스냅샷 격리이다.
(스냅샷은 현재 장면을 사진을 찍는 것과 비슷하다)

* 각각의 트랜잭션이 쿼리를 실행하는 시점으로 DB 현재 상태에 대한 스냅샷을 찍는다. 따라서 스냅샷이 생성되기 전 커밋 된 트랜잭션의 쿼리만 표시된다.
* MVCC는 모든 트랜잭션에 순차적으로 증가하는 ID를 할당한다. (따라서 이전 트랜잭션은 더 작은 ID를 가진다)
* 쿼리가 시작될 때마다 발행할 다음 ID와 현재 실행중인 모든 트랜잭션의 ID를 기록한다. 따라서 해당 정보로 PostgreSQL은 쿼리가 시작되기 전에 트랜잭션이 완료되었는지 확인할 수 있다.
(ID가 쿼리 시작시 발행 할 다음 ID보다 작고, 쿼리 시작시 실행 중이던 트랜잭션의 ID 목록에 없는 경우 쿼리가 시작되기 전에 트랜잭션이 발생한 것이다)
