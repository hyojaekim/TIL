# 쉘 사용법 정리

## # 쉘(shell)

- 사용자와 컴퓨터 하드웨어 또는 운영체제간 인터페이스
- 사용자의 명령어를 해석해서 커널의 명령을 요청해주는 역할

## # 리눅스 기본 명령어

- 리눅스 명령어는 결국 쉘이 제공하는 명령어
- 리눅스 기본 쉘 bash에서 제공하는 기본 명령어를 배우는 것

## # UNIX - 다중 사용자를 지원하는 시스템

### 다중 사용자 관련 명령어

- whoami (내가 누구인가?)

  ![쉘 사용법 정리(1)](./img/쉘-사용법-정리(1).png)

- passwd (패스워드를 변경하는 명령어)

  ![쉘 사용법 정리(2)](./img/쉘-사용법-정리(2).png)

- useradd & adduser (아이디를 새로 만드는 명령어)
    - `useradd` : 사용자 기본 설정 자동으로 하지 않음
    - `adduser` : 사용자 기본 설정을 자동으로 수행함
- sudo (root 권한으로 실행하기)
    - root 계정으로 로그인 하지 않은 상태에서 root 권한이 필요한 명령을 실행할 수 있도록 하는 명령어

    ![쉘 사용법 정리(3)](./img/쉘-사용법-정리(3).png)

- sudo 설정
    - `/etc/sudoers` 설정 파일에서 변경할 수 있다.
    - visudo가 설치되어 있다면 아래 명령어를 통해 설정 파일이 오픈되어 수정이 가능

    ![쉘 사용법 정리(4)](./img/쉘-사용법-정리(4).png)

    ```bash
    1. 특정 사용자가 sudo를 사용할 수 있도록 설정
    userid ALL=(ALL) ALL
    2. 특정 그룹에 포함된 모든 사용자가 sudo를 사용할 수 있도록 설정
    %group ALL=(ALL) ALL
    3. 패스워드 생략 설정
    %group ALL=(ALL) NOPASSWD: ALL
    userid ALL=(ALL) NOPASSWD: ALL
    ```

- su (사용자 변경)
    - 보통 `su -`와 함께 사용
    - `su root` : 현재 사용자의 환경설정 기반 root로 변경
    - `su -root` : 변경되는 사용자의 환경설정을 기반으로 root로 전환

    ![쉘 사용법 정리(5)](./img/쉘-사용법-정리(5).png)

### 파일 및 폴더 관련 명령어

### **[일반]**

- pwd (현재 디렉토리 확인)
- cd (디렉토리 이동)
    - `cd ~` : 홈 디렉토리 이동
    - `cd -` : 이전으로 이동
- ls (파일 목록 확인)
    - `dir` : 도 가능
    - `ls -al` : 숨긴 파일 확인
    - `.` : 현재 디렉토리
    - `..` : 이전 디렉토리
    - `*` : 임의 문자열
    - `?` : 문자 하나

    ![쉘 사용법 정리(6)](./img/쉘-사용법-정리(6).png)

- cat (파일 내용 보기)
    - `cat mysql.cnf` : mysql.cnf 파일 내용이 출력
    - `head mysql.cnf` : 앞에서 n줄 출력 (기본은 10줄)
    - `tail mysql.cnf` : 뒤에서 n줄 출력 (기본은 10줄)
    - `more mysql.cnf` : 화면이 넘어갈 경우, 화면이 넘어가기 전까지 출력
        - `스페이스` : 다음 한페이지
        - `엔터` : 한 줄씩 넘어간다.
- rm (파일 및 폴더 삭제)
    - 주로 사용하는 형태: `rm -rf`
    - r 옵션: 하위 디렉토리를 포함한 모든 파일 삭제
    - f 옵션: 강제로 파일이나 디렉토리 삭제
    - 기본적으로 리눅스는 휴지통이 없다..
- man (메뉴얼 확인)
    - `man (알고싶은 명령어)`을 입력하면 나온다.
- grep (검색 - 있는지 확인)
    - `grep [-옵션] [패턴] [파일 또는 폴더 이름]`

    **[옵션]**

    - `-i` : 영문 대소문자 구별 x
    - `-v` : 패턴을 포함하지 않는 라인 출력
    - `-n` : 검색 결과의 각 행의 선두에 행 번호 삽입
    - `-l` : 파일명만 출력
    - `-c` : 패턴과 일치하는 라인 개수만 출력
    - `-r` : 하위 디렉토리까지 검색

### **[권한]**

- ls & 파일 권한
    - 파일마다 소유자, 소유가 그룹, 모든 사용자에 대해 읽고, 쓰고, 실행하는 권한 설정
        - 소유자 접근 권한 정보는 inode에 저장
    - `-` `rwx` `rw-` `r-x`
        - 읽기(r) : 파일(읽고, 카피) / 폴더(ls명령어 가능)
        - 쓰기(w) : 파일(수정) / 폴더(파일 생성 가능)
        - 실행(x) : 파일(실행) / 폴더(cd 접근 가능)
        - `1칸(1)` / `3칸(2)` / `3칸(3)` / `3칸(4)`
        - `(1)` : 파일(-) 또는 디렉토리(d) 인지 구분
        - `(2)` : 소유자 권한
        - `(3)` : 그룹 권한
        - `(4)` : 기타 사용자 권한
- chmod (파일 권한 변경)
    - 숫자로 사용하는 방법
        - rwx (각각을 2진수로 나타내어(2^2(4), 2^1(2), 2^0(1)) 모두 채워지면 7로 표현한다.)
        - 주로 사용하는 옵션으로 `chmod -R 777 폴더명` 을 사용하는데 `-R` 옵션을 사용하면 해당 폴더 하위에 있는 파일들 모두 권한을 변경하는 옵션을 의미한다.

    ![쉘 사용법 정리(7)](./img/쉘-사용법-정리(7).png)

    ![쉘 사용법 정리(8)](./img/쉘-사용법-정리(8).png)

- chown (소유자 권한 변경)
    - chown [옵션] [소유자:소유그룹] [파일]
- chgrp (그룹 권한 변경)

## # 리눅스 리다이렉션(redirection)과 파이프(pipe)

### Standard Stream(표준 입출력)

- 커맨드로 실행되는 프로세스는 세 가지 스트림을 가지고 있다.
    - 표준 입력 스트림(Standard Input Stream) - **stdin**
    - 표준 출력 스트림(Standard Output Stream) - **stdout**
    - 오류 출력 스트림(Standard Error Stream) - **stderr**
- 모든 스트림은 plain text로 console에 출력하도록 되어 있다.

### 리다이렉션(redirection)

- 표준 스트림 흐름을 바꿔줄 수 있다. (`,` `<` 를 사용한다)
    - 주로 명령어 표준 출력을 화면이 아닌 파일에 쓸 때
    - 기존 파일 끝에 추가하려면 `>>` 또는 `<<` 를 사용

    ```
    ls > files.txt
    ls로 출력되는 표준 출력 스트림의 방향을 files.txt로 바꿔준다. 즉 ls 결과가 files.txt에 저장

    head < files.txt
    files.txt의 앞 10라인이 출력(head로 인하여)

    head < files.txt > files2.txt
    1. files.txt 파일 내용이 head로 들어가서 files.txt의 앞에서 10줄을 출력
    2. head의 출력 스트림은 다시 files2.txt로 들어감
    즉, head는 내용을 출력하지 않고, files2.txt에 저장된다.

    ls >> files.txt
    기존 files.txt 파일 끝에 ls 출력 결과를 추가한다.
    ```

    ![쉘 사용법 정리(9)](./img/쉘-사용법-정리(9).png)

    ![쉘 사용법 정리(10)](./img/쉘-사용법-정리(10).png)

### 파이프(pipe)

- 두 프로세스 사이 **한 프로세스의 출력 스트림을** 또 **다른 프로세스의 입력 스트림으로 사용할 때** 사용된다.

    ```
    ls | grep files.txt
    ls 명령을 통해 출력한 내용이 grep 명령의 입력 스트림으로 들어간다.
    grep files.txt는 grep 명령의 입력 스트림을 검색해서 files.txt가 들어있는 입력 내용만 출력한다.
    즉, ls 명령으로 해당 디렉토리/파일 중에 files.txt 파일이 있는지 출력한다.
    ```
